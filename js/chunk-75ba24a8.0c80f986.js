(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75ba24a8"],{"1e89":function(a,t,e){},4701:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-sheet",{staticClass:"overflow-y-auto overflow-x-hidden px-3",attrs:{tile:"","max-height":"800px","shrink-on-scroll":""}},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valid,callback:function(t){a.valid=t},expression:"valid"}},[e("v-container",[e("v-row",{attrs:{dense:""}},[e("v-icon",{attrs:{large:""},on:{click:a.backHistory}},[a._v("mdi-chevron-left")]),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("div",{staticClass:"my-1 text-body-2"},[e("span",[a._v("*")]),a._v("銀行名稱")])]),e("v-select",{attrs:{items:a.banksData,"item-text":"name","item-value":"bank_code",label:"請選擇銀行","return-object":"","single-line":"",solo:""},on:{change:function(t){return a.getBankInfoBranchCode(a.data.bank.bank_code)}},model:{value:a.data.bank,callback:function(t){a.$set(a.data,"bank",t)},expression:"data.bank"}})],1),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("div",{staticClass:"my-1 text-body-2"},[e("span",[a._v("*")]),a._v("銀行分行名稱")])]),e("v-select",{attrs:{items:a.bankBranchData,"item-text":"name","item-value":"bank_branch_code",label:"請選擇分行","no-data-text":"請先選擇銀行","return-object":"","single-line":"",solo:""},model:{value:a.data.bankInfoBranch,callback:function(t){a.$set(a.data,"bankInfoBranch",t)},expression:"data.bankInfoBranch"}})],1),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("div",{staticClass:"my-1 text-body-2"},[e("span",[a._v("*")]),a._v("銀行帳號")])]),e("v-text-field",{attrs:{rules:[a.rules.required],required:""},model:{value:a.data.BalanceId,callback:function(t){a.$set(a.data,"BalanceId",t)},expression:"data.BalanceId"}})],1),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("div",{staticClass:"my-1 text-body-2"},[e("span",[a._v("*")]),a._v("銀行戶名")])]),e("v-text-field",{attrs:{rules:[a.rules.required],required:""},model:{value:a.data.name,callback:function(t){a.$set(a.data,"name",t)},expression:"data.name"}})],1),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("div",{staticClass:"my-1 text-body-2"},[e("span",[a._v("*")]),a._v("銀行存摺")])]),e("form",[e("div",{staticClass:"form-group"},[e("input",{staticClass:"form-control-file",attrs:{type:"file",accept:"image/png, image/jpeg, image/bmp"},on:{change:a.previewImage}}),e("div",{staticClass:"pa-2 mt-3"},[a.preview?[e("img",{staticClass:"img-fluid",attrs:{src:a.preview}})]:a._e()],2)])])]),a.modifyBank?a._e():e("v-btn",{staticClass:"my-4",attrs:{rounded:"",block:"",color:"primary",disabled:!a.valid},on:{click:a.addConsultantBalance}},[a._v(" 送出 ")]),a.modifyBank?e("v-btn",{staticClass:"my-4",attrs:{rounded:"",block:"",color:"primary",disabled:!a.valid},on:{click:a.updateConsultantBalance}},[a._v(" 修改 ")]):a._e(),e("v-col",{attrs:{cols:"12"}},[e("div",{staticStyle:{height:"100px"}})])],1)],1)],1),e("v-dialog",{attrs:{width:"500"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[e("v-card",[e("v-card-title",{staticClass:"text-h5 d-flex justify-center"},[a._v(" "+a._s(a.dialogText)+" ")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(t){a.dialog=!1}}},[a._v(" 確定 ")])],1)],1)],1)],1)},i=[],s=(e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("b0c0"),e("365c")),o={data:function(){return{valid:!0,dialog:!1,dialogText:"",data:{bank:{},bankInfoBranch:{},BalanceId:"",name:"",image:null},banksData:[],bankBranchData:[],rules:{required:function(a){return!!a||"* 必須輸入。"},imageSize:function(a){return!a||a.size<3e6||"照片檔案請小於 3 MB!"}},preview:null,modifyBank:null,token:"",timer:null,timer2:null}},created:function(){this.init()},methods:{init:function(){null!==sessionStorage.getItem("modifyBank")&&(this.modifyBank=!0),this.token=this.$Cookies.get("Token"),this.getBankInfo()},backHistory:function(){this.$router.go(-1)},getBankInfo:function(){var a=this;Object(s["l"])(this.token).then((function(t){200===t.status&&0!==t.data.length&&(a.banksData=t.data)})).catch((function(a){console.log(a)}))},getBankInfoBranchCode:function(a){var t=this,e=new URLSearchParams;e.append("code",a),Object(s["m"])(e,this.token).then((function(a){200===a.status&&0!==a.data.length&&(t.bankBranchData=a.data)})).catch((function(a){console.log(a)}))},addConsultantBalance:function(){var a=this;if(this.$refs.form.validate()){var t=new FormData;t.append("BalanceName",this.data.bank.name),t.append("BalanceNo",this.data.bank.bank_code),t.append("BalanceHome",this.data.bankInfoBranch.name),t.append("BalanceHomeId",this.data.bankInfoBranch.bank_branch_code),t.append("BalanceId",this.data.BalanceId),t.append("UsernameBalance",this.data.name),t.append("ImgBalance",this.data.image),Object(s["c"])(t,this.token).then((function(t){200===t.status&&"SUCCESS"===t.data.status_code?(a.dialogText="資料已送出",a.dialog=!0,a.timer=setTimeout((function(){a.$router.push({name:"BankAccount"})}),3e3)):200===t.status&&"圖片沒接到"===t.data.status_code?(a.dialogText="請上傳存摺照片",a.dialog=!0):(a.dialogText=t.data.status_code,a.dialog=!0)})).catch((function(a){console.log(a)}))}},updateConsultantBalance:function(){var a=this;if(this.$refs.form.validate()){var t=new FormData;t.append("BalanceName",this.data.bank.name),t.append("BalanceNo",this.data.bank.bank_code),t.append("BalanceHome",this.data.bankInfoBranch.name),t.append("BalanceHomeId",this.data.bankInfoBranch.bank_branch_code),t.append("BalanceId",this.data.BalanceId),t.append("UsernameBalance",this.data.name),t.append("ImgBalance",this.data.image),Object(s["P"])(t,this.token).then((function(t){200===t.status&&"SUCCESS"===t.data.status_code?(a.dialogText="資料已送出",a.dialog=!0,a.timer2=setTimeout((function(){a.$router.push({name:"BankAccount"})}),3e3)):(a.dialogText=t.data.status_code,a.dialog=!0)})).catch((function(a){console.log(a)}))}},previewImage:function(a){var t=this,e=a.target;if(e.files){var n=new FileReader;n.onload=function(a){t.preview=a.target.result},this.data.image=e.files[0],n.readAsDataURL(this.data.image)}},destroyed:function(){clearTimeout(this.timer),clearTimeout(this.timer2)}}},r=o,c=(e("fce9"),e("2877")),d=e("6544"),l=e.n(d),u=e("8336"),f=e("b0af"),h=e("99d9"),m=e("62ad"),v=e("a523"),b=e("169a"),p=e("4bd4"),g=e("132d"),k=e("0fd9"),B=e("b974"),_=e("8dd9"),x=e("2fa4"),y=e("8654"),w=Object(c["a"])(r,n,i,!1,null,"b6514224",null);t["default"]=w.exports;l()(w,{VBtn:u["a"],VCard:f["a"],VCardActions:h["a"],VCardTitle:h["d"],VCol:m["a"],VContainer:v["a"],VDialog:b["a"],VForm:p["a"],VIcon:g["a"],VRow:k["a"],VSelect:B["a"],VSheet:_["a"],VSpacer:x["a"],VTextField:y["a"]})},"4bd4":function(a,t,e){"use strict";var n=e("5530"),i=(e("caad"),e("2532"),e("07ac"),e("4de4"),e("159b"),e("7db0"),e("58df")),s=e("7e2b"),o=e("3206");t["a"]=Object(i["a"])(s["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(a){var t=Object.values(a).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(a){var t=this,e=function(a){return a.$watch("hasError",(function(e){t.$set(t.errorBag,a._uid,e)}),{immediate:!0})},n={_uid:a._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=a.$watch("shouldValidate",(function(i){i&&(t.errorBag.hasOwnProperty(a._uid)||(n.valid=e(a)))})):n.valid=e(a),n},validate:function(){return 0===this.inputs.filter((function(a){return!a.validate(!0)})).length},reset:function(){this.inputs.forEach((function(a){return a.reset()})),this.resetErrorBag()},resetErrorBag:function(){var a=this;this.lazyValidation&&setTimeout((function(){a.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(a){return a.resetValidation()})),this.resetErrorBag()},register:function(a){this.inputs.push(a),this.watchers.push(this.watchInput(a))},unregister:function(a){var t=this.inputs.find((function(t){return t._uid===a._uid}));if(t){var e=this.watchers.find((function(a){return a._uid===t._uid}));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((function(a){return a._uid!==t._uid})),this.inputs=this.inputs.filter((function(a){return a._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(a){var t=this;return a("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(a){return t.$emit("submit",a)}}},this.$slots.default)}})},fce9:function(a,t,e){"use strict";e("1e89")}}]);
//# sourceMappingURL=chunk-75ba24a8.0c80f986.js.map